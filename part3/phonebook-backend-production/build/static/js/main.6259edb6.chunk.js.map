{"version":3,"sources":["ControlledField.js","Filter.js","Flash.js","PersonForm.js","Person.js","Persons.js","services/person.js","App.js","index.js"],"names":["ControlledField","label","value","changeHandler","onChange","Filter","filterValue","filterUpdater","Flash","message","className","WarnFlash","TellFlash","PersonForm","fields","submitFunction","onSubmit","map","field","key","type","Person","person","name","number","Persons","persons","deleteClickHandler","onClick","id","axios","get","then","response","data","newPerson","post","delete","console","log","put","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","currentFilter","setCurrentFilter","warnFlashMessage","setWarnFlashMessage","tellFlashMessage","setTellFlashMessage","stateUpdate","setter","event","target","newNameUpdate","newNumberUpdate","currentFilterUpdate","useEffect","personInterface","personsFiltered","str","filter","regexp","RegExp","match","filterPersons","preventDefault","length","concat","setTimeout","find","window","confirm","returnedPerson","catch","error","offerPersonUpdate","deletePersonById","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6259edb6.chunk.js","sourcesContent":["import React from 'react';\nexport const ControlledField = ({ label, value, changeHandler }) => (\n  <div>\n    {label} <input value={value} onChange={changeHandler} />\n  </div>\n);\n","import React from 'react';\nimport { ControlledField } from './ControlledField';\nexport const Filter = ({ filterValue, filterUpdater }) => (\n  <ControlledField\n    label=\"filter shown with\"\n    value={filterValue}\n    changeHandler={filterUpdater} />\n);\n","import React from 'react';\nimport './Flash.css'\n\nconst Flash = ({message, className}) => message === null ? \n null :\n <div className={`flash ${className}`}>\n  {message}\n</div>\n\nexport const WarnFlash = ({message}) => <Flash message={message} className='warning' />;\nexport const TellFlash = ({message}) => <Flash message={message} className='telling' />;\n","import React from 'react';\nimport { ControlledField } from './ControlledField';\nexport const PersonForm = ({ fields, submitFunction }) => (\n  <form onSubmit={submitFunction}>\n    {fields.map(\n      (field) => <ControlledField\n        label={field.label}\n        value={field.value}\n        changeHandler={field.changeHandler}\n        key={field.label} />)}\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n","import React from 'react';\n\n\nexport const Person = ({ person }) => <span>{person.name} {person.number}</span>;\n","import React from 'react';\nimport { Person } from './Person';\nexport const Persons = ({ persons, deleteClickHandler }) => {\n\n  return (\n    <ul>\n      {persons.map(\n        (person) => <li key={person.name}>\n          <Person person={person} key={person.name} />\n          <button onClick={deleteClickHandler(person.id)}>del</button>\n        </li>)\n      }\n    </ul>)\n};\n","import axios from 'axios'\n\nconst personEndpoint = `/api/persons`\n\nconst getAll = () => axios.get(personEndpoint).then(response => response.data)\n\nconst create = newPerson => \n    axios.post(personEndpoint, newPerson).then(response => response.data)\n\nconst deleteById = id =>\n    axios.delete(personEndpoint+`/${id}`).then(console.log(`deleted person with id ${id} on backend`))\n\nconst update = person =>\n    axios.put(personEndpoint+`/${person.id}`, person).then(response => response.data)\n\nexport default {getAll, create, deleteById, update}","import React, { useState, useEffect } from 'react'\nimport { Filter } from './Filter'\nimport { WarnFlash, TellFlash } from './Flash'\nimport { PersonForm } from './PersonForm'\nimport { Persons } from './Persons'\n\nimport personInterface from './services/person'\n\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [currentFilter, setCurrentFilter] = useState('')\n  const [warnFlashMessage, setWarnFlashMessage] = useState(null)\n  const [tellFlashMessage, setTellFlashMessage] = useState(null)\n\n  const stateUpdate = (setter) => (event) => setter(event.target.value)\n\n  const newNameUpdate = stateUpdate(setNewName)\n  const newNumberUpdate = stateUpdate(setNewNumber)\n  const currentFilterUpdate = stateUpdate(setCurrentFilter)\n\n  const flashTimeout = 3000\n\n  useEffect(() => {\n    personInterface.getAll()\n      .then(persons => setPersons(persons)\n      )\n  }, [])\n\n  const inputSubmit = (event) => {\n    const resetForm = () => {\n      setNewName(\"\")\n      setNewNumber('')\n    }\n\n    const addPerson = (person) => {\n      personInterface.create(person)\n        .then(person => {\n          setPersons(persons.concat(person))\n          setTellFlashMessage(`added ${person.name} to the phonebook`)\n          setTimeout(() => setTellFlashMessage(null), flashTimeout)\n        })\n      resetForm()\n    }\n\n    const updatePerson = (person) => {\n      console.log('updating person', person)\n      personInterface.update(person)\n        .then(returnedPerson =>{\n          setPersons(persons.map(\n            (person) => person.id === returnedPerson.id ? returnedPerson : person))\n          setTellFlashMessage(`updated the number of ${returnedPerson.name}`)\n          setTimeout(setTellFlashMessage(null), flashTimeout)})\n        .catch(error => {\n          setWarnFlashMessage('something went wrong')\n          setTimeout(() => setWarnFlashMessage(null), flashTimeout)\n         })\n    }\n\n    const offerPersonUpdate = (newPerson) => {\n      const id = persons.find((person) => person.name === newPerson.name).id\n      newPerson.id = id\n      return window.confirm(`${newPerson.name} is already added to phonebook;\n      replace the old number with a new one?`) ?\n        updatePerson(newPerson) :\n        null\n      }\n\n    event.preventDefault()\n    const newPerson = { name: newName, number: newNumber }\n\n    persons\n    .filter((person) => person.name === newName)\n    .length === 0 ?\n      addPerson(newPerson) :\n      offerPersonUpdate(newPerson)\n  }\n\n  const clickDeletePersonById = (id) => (event) => {\n    const deletePersonById = (id) => {\n      setPersons(persons.filter(person => person.id !== id))\n      personInterface.deleteById(id)\n    }\n    event.preventDefault()\n    return window.confirm(`delete user with id ${id} from the phonebook?`) ?\n      deletePersonById(id) :\n      null\n  }\n\n  const filterPersons = (persons, str) => persons.filter(\n    (person) => {\n      const regexp = new RegExp(\".*\" + str + \".*\", \"i\")\n      return person.name.match(regexp) !== null\n    })\n\n  const personsFiltered = filterPersons(persons, currentFilter)\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <WarnFlash message={warnFlashMessage} />\n      <TellFlash message={tellFlashMessage} />\n      <Filter filterValue={currentFilter} filterUpdater={currentFilterUpdate} />\n      <h1>add a new</h1>\n      <PersonForm\n        fields={[\n          { label: \"name:\", value: newName, changeHandler: newNameUpdate },\n          { label: 'number:', value: newNumber, changeHandler: newNumberUpdate }\n        ]}\n        submitFunction={inputSubmit} />\n      <h1>Numbers</h1>\n      <Persons persons={personsFiltered} deleteClickHandler={clickDeletePersonById} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from \"./App\"\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}